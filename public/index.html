<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>register</title>
    <link rel="stylesheet" href="css/reg_log.css" />
    <link href="https://fonts.googleapis.com/css?family=Questrial" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="w-head">
            <nav>
                <ul class="w-nav">
                    <li role="presentation"><a class="nav-items" href="register.html">Register</a></li>
                    <li role="presentation"><a class="nav-items" href="login.html">Login</a></li>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="content">
            <span class="intro">
                <h2 id="intro-nav">Register</h2>
                <p>Sign up for burger</p>
             </span>
            <div class="field">
                <section class="input-content">
                    <h2>Register</h2>
                    <div class="input-div-field">
                        <input name="fullname" class="input-field" id="fullname" type="text" placeholder="Full Name" />
                    </div>
                    <div class="input-div-field">
                        <input name="username" class="input-field" id="username" type="text" placeholder="Username" />
                    </div>
                    <div class="input-div-field">
                        <input name="password" class="input-field" id="password" type="password" placeholder="Password" />

                    </div>
                    <button onclick="register()" type="submit">Register</button>
                </section>
            </div>
        </div>

    </div>
    <div class="footer">

    </div>
    <script src="javaScript/fetch.js"></script>
    <script src="javaScript/regex.js"></script>
</body>
<script>
    var username = document.getElementById('username');
    var password = document.getElementById('password');
    var fullname = document.getElementById('fullname');

    function register() {

        var upload = JSON.stringify({
            loginname: username.value,
            password: password.value,
            fullname: fullname.value
        });

        //var url = "http://localhost:3000/users/register/"; //Localhost url -----*
        let url = "https://burgerapplication.herokuapp.com/users/register/"; //Heroku url -----*

        var cfg = {
            method: "POST",
            body: upload
        }

        if(regexNumChar(username.value) || regexNumChar(password.value)) {
            alert('only characters and numbers pls');

        } else {
            if(regexCharSpace(fullname.value))
            {
                alert('does this "' + fullname.value + '" look like a name to you?');
            } else {
                superfetch(url, "json", succ, error, cfg);
            }
        }
    };

    function succ(data) {
        localStorage.setItem("logindata", JSON.stringify(data));
        console.log(data);
        window.location.replace('login.html');
    }

    //error ----------------------------------------
    function error(err) {
        console.log(err);
    }
</script>

</html>
