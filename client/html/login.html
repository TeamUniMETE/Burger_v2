<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>login</title>
</head>

<body>
    <div class="container">
        <div class="w-head">
            <nav>
                <ul class="w-nav">
                    <li role="presentation"><a class="nav-items" href="/users/logout">Logout</a></li>
                    <li role="presentation"><a class="nav-items" href="/users/register">Register</a></li>
                    <li role="presentation"><a class="nav-items" href="/users/login">Login</a></li>
                    <li role="presentation"><a class="nav-items" href="/" />Dashboard</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="login-field">
            <input id="username" type="text" placeholder="username" />
            <input id="password" type="password" placeholder="password" />
            <button onclick="login()">login</button>
        </div>

    </div>
    <div class="footer">

    </div>
    <script src="../js/fetch.js"></script>
</body>
<script>
    var username = document.getElementById('username');
    var password = document.getElementById('password');

    function login() {

        var upload = JSON.stringify({
            loginname: username.value,
            password: password.value
        });

        //var url = "https://burgerapplication.herokuapp.com/users/auth/";
        var url = "http://localhost:3000/users/auth/";

        var cfg = {
            method: "POST",
            body: upload
        }

        superfetch(url, "json", succ, error, cfg);
    }

    function succ(data) {

        console.log(data);

        localStorage.setItem("logindata", JSON.stringify(data));
        window.location.replace('index.html');
    }

    function error(err) {
        console.log(err);
    }
</script>

</html>